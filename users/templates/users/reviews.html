
{% extends "base.html" %}
{% load static %}
{% block content %}

    <!-- –û—Ç–∑—ã–≤—ã -->
    <h3>–û—Ç–∑—ã–≤—ã</h3>
<div class="reviews-list">
    {% for review in reviews %}
        <div class="review">
            <!-- –ê–≤–∞—Ç–∞—Ä–∫–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏ -->
            {% if review.reviewer.image %}
                <img class="review-avatar" src="{{ review.reviewer.image.url }}" alt="Avatar">
            {% else %}
                <div class="review-avatar">
                    <span>{{ review.reviewer.username|first }}</span>
                </div>
            {% endif %}

            <div class="review-content">
                <!-- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ -->
                <p class="review-header">
                    <strong>{{ review.reviewer.username }}</strong> ‚Ä¢ {{ review.reviewer.review_count }} –æ—Ç–∑—ã–≤–æ–≤
                </p>
                
                <!-- –î–∞—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å -->
                <p class="review-date">
                    {{ review.date }}{% if review.edited %}, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω{% endif %}
                </p>
                
                <!-- –û—Ü–µ–Ω–∫–∞ –∑–≤–µ–∑–¥–∞–º–∏ -->
                <div class="review-rating">
                    {% for _ in "12345"|make_list %}
                        {% if forloop.counter <= review.rating %}
                            ‚òÖ
                        {% else %}
                            ‚òÜ
                        {% endif %}
                    {% endfor %}
                </div>

                <!-- –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ -->
                <p class="review-comment">{{ review.comment }}</p>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="review-actions">
                    <button class="review-like">üëç –ü–æ–ª–µ–∑–Ω–æ {{ review.likes }}</button>
                </div>
            </div>
        </div>
    {% empty %}
        <p>–ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤</p>
    {% endfor %}
</div>


    <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞ -->
    <h3>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤:</h3>
    <form method="POST" class="review-form">
        {% csrf_token %}
        
        <label for="id_comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea id="id_comment" name="comment" class="form-control" rows="3"></textarea>
    
        <label for="id_rating">–û—Ü–µ–Ω–∫–∞:</label>
        <select id="id_rating" name="rating" class="form-control">
            <option value="5">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</option>
            <option value="4">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚òÜ</option>
            <option value="3">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚òÜ‚òÜ</option>
            <option value="2">‚≠êÔ∏è‚≠êÔ∏è‚òÜ‚òÜ‚òÜ</option>
            <option value="1">‚≠êÔ∏è‚òÜ‚òÜ‚òÜ‚òÜ</option>
        </select>
    
        <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
    </form>
    

<style>
/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç–∑—ã–≤–æ–≤ */
.reviews-list {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

/* –û—Ç–∑—ã–≤ */
.review {
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: flex-start;
    gap: 10px;
    position: relative;
}

/* –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –æ—Ç–∑—ã–≤–µ */
.review-avatar {
    width: 40px;
    height: 40px;
    background: #ff6600;
    color: white;
    font-weight: bold;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
}

/* –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ */
.review-content {
    flex-grow: 1;
}

.review-content strong {
    font-size: 16px;
    color: #333;
}

.review-content p {
    margin: 5px 0;
    color: #555;
}

/* –û—Ü–µ–Ω–∫–∞ (–∑–≤—ë–∑–¥—ã) */
.review-rating {
    position: absolute;
    top: 10px;
    right: 10px;
    color: #ffcc00;
    font-size: 16px;
}

/* –§–æ—Ä–º–∞ –æ—Ç–∑—ã–≤–æ–≤ */
.review-form {

    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.review-form label {
    font-weight: bold;
    color: #333;
}

.review-form textarea,
.review-form select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

.review-form button {
    background: #ff6600;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s;
}

.review-form button:hover {
    background: #e65c00;
}

</style>
{% endblock %}
